<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <title>字符画</title>
    <link rel="stylesheet" type="text/css" href="../static/css/jump.css">

    <script src="http://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
</head>
<body>
<div>
    <h1>简易字符画</h1>
    <div style="float:left;">

        <label>
            样例图<br/><img src="../static/example.png">
        </label>
    </div>
    <div style="float:left;margin-left:10px;">
        <form action="" enctype='multipart/form-data' method='POST'>
            <label>
                请输入填充的字符<input type="text" name="txt" class="mytxt">
            </label><br/>
            <label for="file" class="but">上传图片</label><br/>
            <input type="file" id="file" name="file"><br/>
            <input type="submit" value="转换" class="button red"><br/>
            <div>
                <p id="fileName"></p>
                <img src="" id="fileImg" class=" exa">
            </div>

            <script>
                $("#file").on("change", function () {
                    //截取路径，获取上传文件名
                    let urlArr = this.value.split("\\");
                    if (this && this.files && this.files[0]) {
                        document.getElementById("fileName").innerHTML = urlArr[urlArr.length - 1];
                        document.getElementById("fileImg").src = URL.createObjectURL(this.files[0]);
                    } else {
                        //兼容IE9以下
                        document.getElementById("fileName").innerHTML = urlArr[urlArr.length - 1];
                        document.getElementById("fileImg").style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
                        document.getElementById("fileImg").filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = this.value;
                    }
                });
            </script>

        </form>
    </div>
</div>
</body>
</html>